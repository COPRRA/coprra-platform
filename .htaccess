# COPRRA - Ultimate .htaccess Fix for Document Root Issue
RewriteEngine On

# ============================================
# PRIORITY 1: Serve static files from public/ FIRST
# ============================================
# For any request to static files, rewrite to public/ directory
RewriteCond %{REQUEST_URI} ^/build/ [NC]
RewriteCond %{DOCUMENT_ROOT}/public%{REQUEST_URI} -f
RewriteRule ^(.*)$ public/$1 [L]

# ============================================
# PRIORITY 2: Serve other static assets
# ============================================
RewriteCond %{REQUEST_URI} \.(css|js|png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot|json|map|txt|xml|pdf)$ [NC]
RewriteCond %{DOCUMENT_ROOT}/public%{REQUEST_URI} -f
RewriteRule ^(.*)$ public/$1 [L]

# ============================================
# PRIORITY 3: Route everything else to public/index.php
# ============================================
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ public/$1 [L]
